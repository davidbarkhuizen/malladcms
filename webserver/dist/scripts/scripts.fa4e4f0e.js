"use strict";function guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}function suffixStaticUrlWithGuid(a){return a+"?guid="+guid()}function User(a,b,c,d){this.id=a,this.name=b,this.surname=c,this.email=d}function randomString(a){return Math.random().toString(36).substring(a)}function genRandomUser(a){var b=randomString(10),c=randomString(10),d=randomString(10);return new User(a,b,c,d)}String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}),Object.defineProperty(Array.prototype,"remove",{enumerable:!1,value:function(a){var b=this,c=this.filter(function(b){return b!==a});return this.length=0,c.forEach(function(a){b.push(a)}),this}}),Object.defineProperty(Array.prototype,"removeWhere",{enumerable:!1,value:function(a){var b=this,c=this.filter(function(b){return!a(b)});return this.length=0,c.forEach(function(a){b.push(a)}),this}}),Object.defineProperty(Array.prototype,"first",{enumerable:!1,value:function(a){var b=this.filter(a);return 0===b.length?void 0:b[0]}}),Object.defineProperty(Array.prototype,"countWhere",{enumerable:!1,value:function(a){var b=0;return this.forEach(function(c){b=a(c)?b+1:b}),b}}),Object.defineProperty(Array.prototype,"contains",{enumerable:!1,value:function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return!0;return!1}}),Object.defineProperty(Array.prototype,"containsWhere",{enumerable:!1,value:function(a){for(var b in this)if(a(this[b])===!0)return!0;return!1}}),angular.module("mallcmsApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.grid","ui.grid.pagination","ui"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/users",{templateUrl:"views/users.html",controller:"UsersCtrl",controllerAs:"users"}).when("/user/:userId",{templateUrl:"views/user.html",controller:"UserCtrl",controllerAs:"user"}).otherwise({redirectTo:"/"})}]);for(var testUsers=[],i=0;15>i;i++)testUsers.push(genRandomUser(i));angular.module("mallcmsApp").factory("DataModel",function(){return{users:testUsers}}),angular.module("mallcmsApp").controller("MainCtrl",function(){}),angular.module("mallcmsApp").controller("UsersCtrl",["$scope","DataModel",function(a,b){a.dataModel=b,a.manageUser=function(a){console.log("manageUser "+a)};var c='<a ng-href="#/user/{{row.entity.id}}" style="display:table-cell;vertical-align:middle;"><button type="button" class="btn btn-primary btn-sm">{0}</button></a>'.replace("{0}","Manage"),d='<div style="text-align:center;height:100%;width:100%;display:table;">{0}</div>'.replace("{0}",c);a.verticallyCenteredCellTemplate=function(a){return'<div style="text-align:center;height:100%;width:100%;display:table;"><span style="display:table-cell;vertical-align:middle;">{0}</span></div>'.replace("{0}",a)},a.usersGridOptions={data:a.dataModel.users,rowHeight:40,paginationPageSizes:[10],paginationPageSize:10,columnDefs:[{field:"name",enableSorting:!1,enableHiding:!1,headerCellClass:"center",cellTemplate:a.verticallyCenteredCellTemplate("{{ row.entity.name }}")},{field:"surname",enableSorting:!1,enableHiding:!1,headerCellClass:"center",cellTemplate:a.verticallyCenteredCellTemplate("{{ row.entity.surname }}")},{field:"email",enableSorting:!1,enableHiding:!1,headerCellClass:"center",cellTemplate:a.verticallyCenteredCellTemplate("{{ row.entity.email }}")},{field:"id",cellTemplate:d,headerCellTemplate:"<span></span>",enableSorting:!1,enableHiding:!1}]}}]),angular.module("mallcmsApp").controller("UserCtrl",["$scope","$routeParams","DataModel",function(a,b,c){a.dataModel=c,a.dataModel.user="new"!==b.userId?a.dataModel.user=a.dataModel.users.first(function(a){return a.id===b.userId}):new User(null,"","",""),a.originalUserstate=new User(a.dataModel.user.id,a.dataModel.user.name,a.dataModel.user.surname,a.dataModel.user.email),a.password={password:"",confirm:""},a.userHasChanged=function(){var b=a.originalUserstate.email!==a.dataModel.user.email;return b},a.passwordIsStrong=function(a){if(a.length<8)return!1;for(var b=["ABCDEFGHIJKLMNOPQRSTUVWXYZ","0123456789","!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~"],c=0;c<b.length;c++){for(var d=b[c],e=!1,f=0;f<d.length;f++)if(-1!==a.indexOf(d[f])){e=!0;break}if(!e)return!1}return!0},a.passwordIsValid=function(){return a.passwordIsStrong(a.password.password)?!0:!1},a.confirmPassword=function(b){return a.password.password===b},a.newUserInfoIsCompleteAndValid=function(){var b=a.dataModel.user.name.length>0&&a.dataModel.user.surname.length>0&&a.dataModel.user.email.length>0;return b&&a.passwordIsValid()}}]),angular.module("mallcmsApp").run(["$templateCache",function(a){a.put("views/main.html",'<div style="text-align:center"> <div class="triple-text"> <br> Mall CMS </div> <div class="double-text"> manage your mall advertising campaigns <br> in the cloud </div> <div style="height:100px"> </div> <div> <img ng-src="images/fingerprints_final_new_60x60.f0c09391.png"> <br> <br> 2015 <br> fingerprints software </div> </div>'),a.put("views/user.html",'<div class="view-header"> <span ng-if="dataModel.user.id !== null"> Manage Existing User </span> <span ng-if="dataModel.user.id === null"> Create New User </span> </div> <br> <form name="EditUserForm" class="one-point-five-text"> <label> <span class="form-label">Name</span> <input type="text" name="name" ng-model="dataModel.user.name" required ng-disabled="dataModel.user.id !== null"> <div role="alert" class="error" ng-show="EditUserForm.name.$error.required"> required! </div> </label> <br> <label> <span class="form-label">Surname</span> <input type="text" name="surname" ng-model="dataModel.user.surname" required ng-disabled="dataModel.user.id !== null"> <div role="alert" class="error" ng-show="EditUserForm.surname.$error.required"> required! </div> </label> <br> <label> <span class="form-label">Email</span> <input type="text" name="email" ng-model="dataModel.user.email" required> <div role="alert" class="error" ng-show="EditUserForm.email.$error.required"> required! </div> </label> <br> <div> <label> <span class="form-label">Password</span> <input type="password" name="password" ng-model="password.password" ng-required="(dataModel.user.id == null)" ui-validate="{strongpassword : \'passwordIsStrong($value)\'}"> <div role="alert" class="error" ng-show="EditUserForm.password.$error.required"> required! </div> <div role="alert" class="error" ng-show="EditUserForm.password.$error.strongpassword"> the password is too weak. it must <ol> <li>be at least 8 long</li> <li>have at least 1 uppercase letter</li> <li>have at least 1 number</li> <li>have at least 1 special character ! " # $ % &amp; \' ( ) * + , - . / : ; &lt; = &gt; ? @ [ \\ ] ^ _ ` { | } ~</li> </ol> </div> </label> <br> <label> <span class="form-label">Confirm Password</span> <input type="password" name="confirmpassword" ng-model="password.confirm" ng-required="(dataModel.user.id == null)" ui-validate="{confirmpassword : \'confirmPassword($value)\'}"> <div role="alert" class="error" ng-show="EditUserForm.confirmpassword.$error.required"> required! </div> <div role="alert" class="error" ng-show="EditUserForm.confirmpassword.$error.confirmpassword"> does not match! </div> </label> </div> <br> <div> <div ng-show="dataModel.user.id === null"> <a ng-href=""> <button type="button" ng-click ng-disabled="(newUserInfoIsCompleteAndValid() == false)" class="btn btn-primary btn-sm">Create User</button> </a> </div> <div ng-show="dataModel.user.id !== null"> <a ng-href=""> <button type="button" ng-click ng-disabled="(userHasChanged() == false)" class="btn btn-primary btn-sm">Submit Changes</button> </a> </div> </div> </form>'),a.put("views/users.html",'<div> <div class="view-header"> Manage System Users </div> <br> <!-- <div ng-repeat=\'user in existingUsers\'>\n		{{ user.name }}, {{ user.surname }} - {{ user.email }}\n	</div> --> <div> <a ng-href="#/user/new"> <button type="button" class="btn btn-primary btn-sm">Add new user</button> </a> </div> <br> <div ui-grid="usersGridOptions" ui-grid-pagination style="width:100%;height:100%"></div> <br> </div>')}]);